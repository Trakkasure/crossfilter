(function(a){function b(a){return a}function c(a,b){for(var c=0,d=b.length,e=new Array(d);c<d;++c)e[c]=a[b[c]];return e}function e(a){function b(b,c,d,e){while(d<e){var f=d+e>>1;a(b[f])<c?d=f+1:e=f}return d}function c(b,c,d,e){while(d<e){var f=d+e>>1;c<a(b[f])?e=f:d=f+1}return d}return c.right=c,c.left=b,c}function g(a){function b(a,b,c){var e=c-b,f=(e>>>1)+1;while(--f>0)d(a,f,e,b);return a}function c(a,b,c){var e=c-b,f;while(--e>0)f=a[b],a[b]=a[b+e],a[b+e]=f,d(a,1,e,b);return a}function d(b,c,d,e){var f=b[--e+c],g=a(f),h;while((h=c<<1)<=d){h<d&&a(b[e+h])>a(b[e+h+1])&&h++;if(g<=a(b[e+h]))break;b[e+c]=b[e+h],c=h}b[e+c]=f}return b.sort=c,b}function i(a){function c(c,d,e,f){var g=new Array(f=Math.min(e-d,f)),h,i,j,k;for(i=0;i<f;++i)g[i]=c[d++];b(g,0,f);if(d<e){h=a(g[0]);do if(j=a(k=c[d])>h)g[0]=k,h=a(b(g,0,f)[0]);while(++d<e)}return g}var b=g(a);return c}function l(a){function b(b,c,d){for(var e=c+1;e<d;++e){for(var f=e,g=b[e],h=a(g);f>c&&a(b[f-1])>h;--f)b[f]=b[f-1];b[f]=g}return b}return b}function n(a){function c(a,c,e){return(e-c<o?b:d)(a,c,e)}function d(b,d,e){var f=(e-d)/6|0,g=d+f,h=e-1-f,i=d+e-1>>1,j=i-f,k=i+f,l=b[g],m=a(l),n=b[j],o=a(n),p=b[i],q=a(p),r=b[k],s=a(r),t=b[h],u=a(t),v;m>o&&(v=l,l=n,n=v,v=m,m=o,o=v),s>u&&(v=r,r=t,t=v,v=s,s=u,u=v),m>q&&(v=l,l=p,p=v,v=m,m=q,q=v),o>q&&(v=n,n=p,p=v,v=o,o=q,q=v),m>s&&(v=l,l=r,r=v,v=m,m=s,s=v),q>s&&(v=p,p=r,r=v,v=q,q=s,s=v),o>u&&(v=n,n=t,t=v,v=o,o=u,u=v),o>q&&(v=n,n=p,p=v,v=o,o=q,q=v),s>u&&(v=r,r=t,t=v,v=s,s=u,u=v);var w=n,x=o,y=r,z=s;b[g]=l,b[j]=b[d],b[i]=p,b[k]=b[e-1],b[h]=t;var A=d+1,B=e-2,C=x<=z&&x>=z;if(C)for(var D=A;D<=B;++D){var E=b[D],F=a(E);if(F<x)D!==A&&(b[D]=b[A],b[A]=E),++A;else if(F>x)for(;;){var G=a(b[B]);if(G>x){B--;continue}if(G<x){b[D]=b[A],b[A++]=b[B],b[B--]=E;break}b[D]=b[B],b[B--]=E;break}}else for(var D=A;D<=B;D++){var E=b[D],F=a(E);if(F<x)D!==A&&(b[D]=b[A],b[A]=E),++A;else if(F>z)for(;;){var G=a(b[B]);if(G>z){B--;if(B<D)break;continue}G<x?(b[D]=b[A],b[A++]=b[B],b[B--]=E):(b[D]=b[B],b[B--]=E);break}}b[d]=b[A-1],b[A-1]=w,b[e-1]=b[B+1],b[B+1]=y,c(b,d,A-1),c(b,B+2,e);if(C)return b;if(A<g&&B>h){var H,G;while((H=a(b[A]))<=x&&H>=x)++A;while((G=a(b[B]))<=z&&G>=z)--B;for(var D=A;D<=B;D++){var E=b[D],F=a(E);if(F<=x&&F>=x)D!==A&&(b[D]=b[A],b[A]=E),A++;else if(F<=z&&F>=z)for(;;){var G=a(b[B]);if(G<=z&&G>=z){B--;if(B<D)break;continue}G<x?(b[D]=b[A],b[A++]=b[B],b[B--]=E):(b[D]=b[B],b[B--]=E);break}}}return c(b,A,B+1)}var b=l(a);return c}function u(a){return new Array(a)}function v(a,b){return function(c){var d=c.length;return[a.left(c,b,0,d),a.right(c,b,0,d)]}}function w(a,b){var c=b[0],d=b[1];return function(b){var e=b.length;return[a.left(b,c,0,e),a.left(b,d,0,e)]}}function x(a){return[0,a.length]}function y(){return null}function z(){return 0}function A(a){return a+1}function B(a){return a-1}function C(a){return function(b,c){return b+ +a(c)}}function D(a){return function(b,c){return b-a(c)}}function E(a){var b=a.length,c=2166136261,d,e,f=-1;while(++f<b){d=a[f];if(e=d&4278190080)c^=e>>24,c+=(c<<1)+(c<<4)+(c<<7)+(c<<8)+(c<<24);if(e=d&16711680)c^=e>>16,c+=(c<<1)+(c<<4)+(c<<7)+(c<<8)+(c<<24);if(e=d&65280)c^=e>>8,c+=(c<<1)+(c<<4)+(c<<7)+(c<<8)+(c<<24);c^=d&255,c+=(c<<1)+(c<<4)+(c<<7)+(c<<8)+(c<<24)}return c+=c<<13,c^=c>>7,c+=c<<3,c^=c>>17,c+=c<<5,c&4294967295}function F(a){return a+=(a<<1)+(a<<4)+(a<<7)+(a<<8)+(a<<24),a+=a<<13,a^=a>>7,a+=a<<3,a^=a>>17,a+=a<<5,a&4294967295}function G(){function r(b){var c=f,d=b.length;return d&&(e=e.concat(b),l=s(l,f+=d),o.forEach(function(a){a(b,c,d)})),a}function u(a){function T(b,d,e){G=b.map(a),K=L(I(e),0,e),G=c(G,K);var g=N(G),h=g[0],i=g[1],j;for(j=0;j<h;++j)l[K[j]+d]|=r;for(j=i;j<e;++j)l[K[j]+d]|=r;if(!d){E=G,F=K,P=h,Q=i;return}var k=E,m=F,n=0,o=0;E=new Array(f),F=H(f,f);for(j=0;n<d&&o<e;++j)k[n]<G[o]?(E[j]=k[n],F[j]=m[n++]):(E[j]=G[o],F[j]=K[o++]+d);for(;n<d;++n,++j)E[j]=k[n],F[j]=m[n];for(;o<e;++o,++j)E[j]=G[o],F[j]=K[o]+d;g=N(E),P=g[0],Q=g[1]}function U(a,b,c){O.forEach(function(a){a(G,K,b,c)}),G=K=null}function V(a){var b,c,d,e=a[0],g=a[1],h=[],i=[],k=S||R;if(S){for(b=0;b<f;++b)l[F[b]]|=r;P=0,Q=0,S=!1}if(R){for(b=e;b<g;++b)l[F[b]]&=u;P>e&&(P=e),Q<g&&(Q=g)}else{if(e<P)for(b=e,c=Math.min(P,g);b<c;++b)l[d=F[b]]^=r,h.push(d);else if(e>P)for(b=P,c=Math.min(e,Q);b<c;++b)l[d=F[b]]^=r,i.push(d);if(g>Q)for(b=Math.max(e,Q),c=g;b<c;++b)l[d=F[b]]^=r,h.push(d);else if(g<Q)for(b=Math.max(P,g),c=Q;b<c;++b)l[d=F[b]]^=r,i.push(d);P=e,Q=g}return m.forEach(function(a){a(r,h,i,k)}),j}function W(a){if(arguments.length>1){for(var b=0,c=arguments.length;b<c;++b)b===1&&(R=!0),(Array.isArray(a=arguments[b])?Z:X)(a);return R=!1,S=!0,j}return a==null?$():Array.isArray(a)?Z(a):typeof a=="function"?Y(a):X(a)}function X(a){return V((N=v(d,a))(E))}function Y(a){S=!0;for(var b=0;b<f;++b)a(E[b],b)?l[F[b]]&=u:l[F[b]]|=r;return P=0,lo1=f,m.forEach(function(a){a(r,[],[],!0)}),j}function Z(a){return V((N=w(d,a))(E))}function $(){return V((N=x)(E))}function _(a){var b=[],c=Q,d;while(--c>=P&&a>0)l[d=F[c]]||(b.push(e[d]),--a);return b}function ba(a){var b=[],c=P,d;while(c<Q&&a>0)l[d=F[c]]||(b.push(e[d]),--a),c++;return b}function bb(a){function K(b,c,g,i){function Q(){++n===k&&(p=t(p,j<<=1),h=t(h,j),k=J(j))}var o=d,p=H(n,k),r=q,v=w,z=n,A=0,B=0,C,D,E,F,K,O;I&&(r=v=y),d=new Array(n),n=0,h=z>1?s(h,f):H(f,k),z&&(E=(D=o[0]).key);while(B<i&&!((F=a(b[B]))>=F))++B;while(B<i){if(D&&E<=F){K=D,O=E,p[A]=n;if(D=o[++A])E=D.key}else K={key:F,value:v()},O=F;d[n]=K;while(!(F>O)){h[C=c[B]+g]=n,l[C]&u||(K.value=r(K.value,e[C]));if(++B>=i)break;F=a(b[B])}Q()}while(A<z)d[p[A]=n]=o[A++],Q();if(n>A)for(A=0;A<g;++A)h[A]=p[h[A]];C=m.indexOf(x),n>1?(x=L,G=N):(n===1?(x=M,G=P):(x=y,G=y),h=null),m[C]=x,removeListeners.push(x)}function L(a,b,c,f){if(a===r||(I=I||f))return;var g,i,j,k;for(g=0,j=b.length;g<j;++g)l[i=b[g]]&u||(k=d[h[i]],k.value=q(k.value,e[i]));for(g=0,j=c.length;g<j;++g)(l[i=c[g]]&u)===a&&(k=d[h[i]],k.value=v(k.value,e[i]))}function M(a,b,c,f){if(a===r||(I=I||f))return;var g,h,i,j=d[0];for(g=0,i=b.length;g<i;++g)l[h=b[g]]&u||(j.value=q(j.value,e[h]));for(g=0,i=c.length;g<i;++g)(l[h=c[g]]&u)===a&&(j.value=v(j.value,e[h]))}function N(){var a,b;for(a=0;a<n;++a)d[a].value=w();for(a=0;a<f;++a)l[a]&u||(b=d[h[a]],b.value=q(b.value,e[a]))}function P(){var a,b=d[0];b.value=w();for(a=0;a<f;++a)l[a]&u||(b.value=q(b.value,e[a]))}function Q(){return I&&(G(),I=!1),d}function R(){return I&&(G(),I=!1),h}function S(a){var b=o(Q(),0,d.length,a);return p.sort(b,0,b.length)}function T(a,b,d){return q=a,v=b,w=d,I=!0,c}function U(){return T(A,B,z)}function V(a){return T(C(a),D(a),z)}function W(a){function b(b){return a(b.value)}return o=i(b),p=g(b),c}function X(){return W(b)}function Y(){return n}var c={_groupIndex:R,top:S,all:Q,reduce:T,reduceCount:U,reduceSum:V,order:W,orderNatural:X,size:Y},d,h,j=8,k=J(j),n=0,o,p,q,v,w,x=y,G=y,I=!0;return arguments.length<1&&(a=b),m.push(x),removeListeners.push(x),O.push(K),K(E,F,0,f),U().orderNatural()}function bc(){var a=bb(y),b=a.all;return delete a.all,delete a.top,delete a.order,delete a.orderNatural,delete a.size,a.value=function(){return b()[0].value},a}function bd(){$();var a=p?-1>>>32-p:0,b=-1<<p,c,d=[];for(var e=0;e<f;e++)l[e]=(c=l[e])&a|c>>>1&b,d[e]=e;return m.forEach(function(a){a(r,[],d)}),q.splice(p,1),q.slice(p).forEach(function(a,b){a(p+b)}),removeListeners.forEach(function(a){var b=o.indexOf(a);b>=0&&o.splice(b,1),b=m.indexOf(a),b>=0&&m.splice(b,1)}),h--,j}var j={filter:W,filterExact:X,filterRange:Z,filterAll:$,top:_,bottom:ba,group:bb,groupAll:bc,remove:bd},p=h++,r=1<<p,u=~r,E,F,G,K,L=n(function(a){return G[a]}),N=x,O=[],P=0,Q=0,R=!1,S=!1;return removeListeners=[],o.unshift(T),o.push(U),removeListeners.push(T),removeListeners.push(U),h>k&&(l=t(l,k<<=1)),T(e,0,f),U(e,0,f),q.push(function(a){r=1<<(p=a),u=~r}),j}function G(){function i(a,d,g){var i;if(h)return;for(i=d;i<f;++i)l[i]||(b=c(b,e[i]))}function j(a,f,g,i){var j,k,m;if(h=h||i)return;for(j=0,m=f.length;j<m;++j)l[k=f[j]]||(b=c(b,e[k]));for(j=0,m=g.length;j<m;++j)l[k=g[j]]===a&&(b=d(b,e[k]))}function k(){var a;b=g();for(a=0;a<f;++a)l[a]||(b=c(b,e[a]))}function n(b,e,f){return c=b,d=e,g=f,h=!0,a}function p(){return n(A,B,z)}function q(a){return n(C(a),D(a),z)}function r(){return h&&(k(),h=!1),b}var a={reduce:n,reduceCount:p,reduceSum:q,value:r},b,c,d,g,h=!0;return m.push(j),o.push(i),i(e,0,f),p()}function K(){return f}function L(a){function p(a,b){var c,d=!0;for(c=0;d&&c<h;c++)d=a[c]==b[c];return d}function q(a,b){var c,d=0;for(c=0;!d&&c<h;c++)d=a[c]<b[c]?-1:a[c]>b[c]?1:0;return d}function r(){function b(){var b,e,i,j,k,l,m=[],n=Math.max(Math.pow(2,Math.ceil(Math.log(f*1.5)/Math.log(2))),256),o=n-1,q=new Array(n);for(b=0;b<h;b++)m.push(a[b]._groupIndex());for(b=0;b<f;b++){l=[];for(e=0;e<h;e++)l.push(m[e]?m[e][b]:0);i=-1,j=E(l)&o,k=F(j),j&=o;while(l&&q[j])p(c[q[j]-1],l)?(d.push(q[j]-1),l=null):(i==j&&(k=1),i==-1&&(i=j),j=j+k&o);l&&(q[j]=c.length+1,d.push(c.length),c.push(l))}g=c.length}function k(){var a,b=[];for(a=0;a<g;a++)c[a].push(a);c.sort(q);for(a=0;a<g;a++)b[c[a][h]]=a;for(a=0;a<f;a++)d[a]=b[d[a]]}function m(){var b,d,e,f=[];for(b=0;b<h;b++)f.push(a[b].all());for(b=0;b<g;b++){e=[];for(j=0;j<h;j++)e.push(f[j][c[b][j]].key);c[b]={key:e}}}function o(){var a,b;for(a=0;a<g;++a)c[a].value=n();for(a=0;a<f;++a)l[a]||(b=c[d[a]],b.value=i(b.value,e[a]))}c=[],d=[],b(),k(),m(),o()}function s(a,b,f){if(o)return;var g,h,j,m;for(g=0,j=b.length;g<j;++g)l[h=b[g]]||(m=c[d[h]],m.value=i(m.value,e[h]));for(g=0,j=f.length;g<j;++g)l[h=f[g]]&&(m=c[d[h]],m.value=k(m.value,e[h]))}function t(){return o&&(r(),o=!1),c}function u(){return o&&(r(),o=!1),g}function v(a,c,d){return i=a,k=c,n=d,o=!0,b}function w(){return v(A,B,z)}function x(a){return v(C(a),D(a),z)}var b={all:t,size:u,reduce:v,reduceCount:w,reduceSum:x},c,d,g=0,h=a.length,i,k,n,o=!0;return m.push(s),w()}var a={add:r,dimension:u,pivotGroup:L,groupAll:G,size:K},e=[],f=0,h=0,k=8,l=p(0),m=[],o=[],q=[];return arguments.length?r(arguments[0]):a}function H(a,b){return(b<257?p:b<65537?q:r)(a)}function I(a){var b=H(a,a);for(var c=-1;++c<a;)b[c]=c;return b}function J(a){return a===8?256:a===16?65536:4294967296}G.version="1.1.0",G.permute=c;var d=G.bisect=e(b);d.by=e;var f=G.heap=g(b);f.by=g;var h=G.heapselect=i(b);h.by=i;var k=G.insertionsort=l(b);k.by=l;var m=G.quicksort=n(b);m.by=n;var o=32,p=u,q=u,r=u,s=b,t=b;typeof Uint8Array!="undefined"&&(p=function(a){return new Uint8Array(a)},q=function(a){return new Uint16Array(a)},r=function(a){return new Uint32Array(a)},s=function(a,b){var c=new a.constructor(b);return c.set(a),c},t=function(a,b){var c;switch(b){case 16:c=q(a.length);break;case 32:c=r(a.length);break;default:throw new Error("invalid array width!")}return c.set(a),c}),a.crossfilter=G})(this);