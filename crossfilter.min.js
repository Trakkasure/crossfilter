(function(a){function b(a){return a}function c(a,b){for(var c=0,d=b.length,e=new Array(d);c<d;++c)e[c]=a[b[c]];return e}function e(a){function b(b,c,d,e){while(d<e){var f=d+e>>1;a(b[f])<c?d=f+1:e=f}return d}function c(b,c,d,e){while(d<e){var f=d+e>>1;c<a(b[f])?e=f:d=f+1}return d}return c.right=c,c.left=b,c}function g(a){function b(a,b,c){var e=c-b,f=(e>>>1)+1;while(--f>0)d(a,f,e,b);return a}function c(a,b,c){var e=c-b,f;while(--e>0)f=a[b],a[b]=a[b+e],a[b+e]=f,d(a,1,e,b);return a}function d(b,c,d,e){var f=b[--e+c],g=a(f),h;while((h=c<<1)<=d){h<d&&a(b[e+h])>a(b[e+h+1])&&h++;if(g<=a(b[e+h]))break;b[e+c]=b[e+h],c=h}b[e+c]=f}return b.sort=c,b}function i(a){function c(c,d,e,f){var g=new Array(f=Math.min(e-d,f)),h,i,j,k;for(i=0;i<f;++i)g[i]=c[d++];b(g,0,f);if(d<e){h=a(g[0]);do if(j=a(k=c[d])>h)g[0]=k,h=a(b(g,0,f)[0]);while(++d<e)}return g}var b=g(a);return c}function k(a){function b(b,c,d){for(var e=c+1;e<d;++e){for(var f=e,g=b[e],h=a(g);f>c&&a(b[f-1])>h;--f)b[f]=b[f-1];b[f]=g}return b}return b}function m(a){function c(a,c,e){return(e-c<n?b:d)(a,c,e)}function d(b,d,e){var f=(e-d)/6|0,g=d+f,h=e-1-f,i=d+e-1>>1,j=i-f,k=i+f,l=b[g],m=a(l),n=b[j],o=a(n),p=b[i],q=a(p),r=b[k],s=a(r),t=b[h],u=a(t),v;m>o&&(v=l,l=n,n=v,v=m,m=o,o=v),s>u&&(v=r,r=t,t=v,v=s,s=u,u=v),m>q&&(v=l,l=p,p=v,v=m,m=q,q=v),o>q&&(v=n,n=p,p=v,v=o,o=q,q=v),m>s&&(v=l,l=r,r=v,v=m,m=s,s=v),q>s&&(v=p,p=r,r=v,v=q,q=s,s=v),o>u&&(v=n,n=t,t=v,v=o,o=u,u=v),o>q&&(v=n,n=p,p=v,v=o,o=q,q=v),s>u&&(v=r,r=t,t=v,v=s,s=u,u=v);var w=n,x=o,y=r,z=s;b[g]=l,b[j]=b[d],b[i]=p,b[k]=b[e-1],b[h]=t;var A=d+1,B=e-2,C=x<=z&&x>=z;if(C)for(var D=A;D<=B;++D){var E=b[D],F=a(E);if(F<x)D!==A&&(b[D]=b[A],b[A]=E),++A;else if(F>x)for(;;){var G=a(b[B]);if(G>x){B--;continue}if(G<x){b[D]=b[A],b[A++]=b[B],b[B--]=E;break}b[D]=b[B],b[B--]=E;break}}else for(var D=A;D<=B;D++){var E=b[D],F=a(E);if(F<x)D!==A&&(b[D]=b[A],b[A]=E),++A;else if(F>z)for(;;){var G=a(b[B]);if(G>z){B--;if(B<D)break;continue}G<x?(b[D]=b[A],b[A++]=b[B],b[B--]=E):(b[D]=b[B],b[B--]=E);break}}b[d]=b[A-1],b[A-1]=w,b[e-1]=b[B+1],b[B+1]=y,c(b,d,A-1),c(b,B+2,e);if(C)return b;if(A<g&&B>h){var H,G;while((H=a(b[A]))<=x&&H>=x)++A;while((G=a(b[B]))<=z&&G>=z)--B;for(var D=A;D<=B;D++){var E=b[D],F=a(E);if(F<=x&&F>=x)D!==A&&(b[D]=b[A],b[A]=E),A++;else if(F<=z&&F>=z)for(;;){var G=a(b[B]);if(G<=z&&G>=z){B--;if(B<D)break;continue}G<x?(b[D]=b[A],b[A++]=b[B],b[B--]=E):(b[D]=b[B],b[B--]=E);break}}}return c(b,A,B+1)}var b=k(a);return c}function t(a){return new Array(a)}function u(a,b){return function(c){var d=c.length;return[a.left(c,b,0,d),a.right(c,b,0,d)]}}function v(a,b){var c=b[0],d=b[1];return function(b){var e=b.length;return[a.left(b,c,0,e),a.left(b,d,0,e)]}}function w(a){return[0,a.length]}function x(){return null}function y(){return 0}function z(a){return a+1}function A(a){return a-1}function B(a){return function(b,c){return b+ +a(c)}}function C(a){return function(b,c){return b-a(c)}}function D(){function q(b){var c=f,d=b.length;return d&&(e=e.concat(b),k=r(k,f+=d),n.forEach(function(a){a(b,c,d)})),a}function t(a){function T(b,d,e){J=b.map(a),K=L(F(e),0,e),J=c(J,K);var g=N(J),h=g[0],i=g[1],j;for(j=0;j<h;++j)k[K[j]+d]|=t;for(j=i;j<e;++j)k[K[j]+d]|=t;if(!d){H=J,I=K,P=h,Q=i;return}var l=H,m=I,n=0,o=0;H=new Array(f),I=E(f,f);for(j=0;n<d&&o<e;++j)l[n]<J[o]?(H[j]=l[n],I[j]=m[n++]):(H[j]=J[o],I[j]=K[o++]+d);for(;n<d;++n,++j)H[j]=l[n],I[j]=m[n];for(;o<e;++o,++j)H[j]=J[o],I[j]=K[o]+d;g=N(H),P=g[0],Q=g[1]}function U(a,b,c){O.forEach(function(a){a(J,K,b,c)}),J=K=null}function V(a){var b,c,d,e=a[0],g=a[1],h=[],i=[],j=S||R;if(S){for(b=0;b<f;++b)k[I[b]]|=t;P=0,Q=0,S=!1}if(R){for(b=e;b<g;++b)k[I[b]]&=D;P>e&&(P=e),Q<g&&(Q=g)}else{if(e<P)for(b=e,c=Math.min(P,g);b<c;++b)k[d=I[b]]^=t,h.push(d);else if(e>P)for(b=P,c=Math.min(e,Q);b<c;++b)k[d=I[b]]^=t,i.push(d);if(g>Q)for(b=Math.max(e,Q),c=g;b<c;++b)k[d=I[b]]^=t,h.push(d);else if(g<Q)for(b=Math.max(P,g),c=Q;b<c;++b)k[d=I[b]]^=t,i.push(d);P=e,Q=g}return l.forEach(function(a){a(t,h,i,j)}),o}function W(a){if(arguments.length>1){for(var b=0,c=arguments.length;b<c;++b)b===1&&(R=!0),(Array.isArray(a=arguments[b])?Z:X)(a);return R=!1,S=!0,o}return a==null?$():Array.isArray(a)?Z(a):typeof a=="function"?Y(a):X(a)}function X(a){return V((N=u(d,a))(H))}function Y(a){S=!0;for(var b=0;b<f;++b)a(H[b],b)?k[I[b]]&=D:k[I[b]]|=t;return P=0,lo1=f,l.forEach(function(a){a(t,[],[],!0)}),o}function Z(a){return V((N=v(d,a))(H))}function $(){return V((N=w)(H))}function _(a){var b=[],c=Q,d;while(--c>=P&&a>0)k[d=I[c]]||(b.push(e[d]),--a);return b}function ba(a){var b=[],c=P,d;while(c<Q&&a>0)k[d=I[c]]||(b.push(e[d]),--a),c++;return b}function bb(a){function K(b,c,g,i){function Q(){++n===m&&(p=s(p,j<<=1),h=s(h,j),m=G(j))}var o=d,p=E(n,m),t=q,u=v,y=n,z=0,A=0,B,C,H,I,K,O;J&&(t=u=x),d=new Array(n),n=0,h=y>1?r(h,f):E(f,m),y&&(H=(C=o[0]).key);while(A<i&&!((I=a(b[A]))>=I))++A;while(A<i){if(C&&H<=I){K=C,O=H,p[z]=n;if(C=o[++z])H=C.key}else K={key:I,value:u()},O=I;d[n]=K;while(!(I>O)){h[B=c[A]+g]=n,k[B]&D||(K.value=t(K.value,e[B]));if(++A>=i)break;I=a(b[A])}Q()}while(z<y)d[p[z]=n]=o[z++],Q();if(n>z)for(z=0;z<g;++z)h[z]=p[h[z]];B=l.indexOf(w),n>1?(w=L,F=N):(n===1?(w=M,F=P):(w=x,F=x),h=null),l[B]=w,removeListeners.push(w)}function L(a,b,c,f){if(a===t||(J=J||f))return;var g,i,j,l;for(g=0,j=b.length;g<j;++g)k[i=b[g]]&D||(l=d[h[i]],l.value=q(l.value,e[i]));for(g=0,j=c.length;g<j;++g)(k[i=c[g]]&D)===a&&(l=d[h[i]],l.value=u(l.value,e[i]))}function M(a,b,c,f){if(a===t||(J=J||f))return;var g,h,i,j=d[0];for(g=0,i=b.length;g<i;++g)k[h=b[g]]&D||(j.value=q(j.value,e[h]));for(g=0,i=c.length;g<i;++g)(k[h=c[g]]&D)===a&&(j.value=u(j.value,e[h]))}function N(){var a,b;for(a=0;a<n;++a)d[a].value=v();for(a=0;a<f;++a)k[a]&D||(b=d[h[a]],b.value=q(b.value,e[a]))}function P(){var a,b=d[0];b.value=v();for(a=0;a<f;++a)k[a]&D||(b.value=q(b.value,e[a]))}function Q(){return J&&(F(),J=!1),d}function R(a){var b=o(Q(),0,d.length,a);return p.sort(b,0,b.length)}function S(a,b,d){return q=a,u=b,v=d,J=!0,c}function T(){return S(z,A,y)}function U(a){return S(B(a),C(a),y)}function V(a){function b(b){return a(b.value)}return o=i(b),p=g(b),c}function W(){return V(b)}function X(){return n}var c={top:R,all:Q,reduce:S,reduceCount:T,reduceSum:U,order:V,orderNatural:W,size:X},d,h,j=8,m=G(j),n=0,o,p,q,u,v,w=x,F=x,J=!0;return arguments.length<1&&(a=b),l.push(w),removeListeners.push(w),O.push(K),K(H,I,0,f),T().orderNatural()}function bc(){var a=bb(x),b=a.all;return delete a.all,delete a.top,delete a.order,delete a.orderNatural,delete a.size,a.value=function(){return b()[0].value},a}function bd(){$();var a=q?-1>>>32-q:0,b=-1<<q,c,d=[];for(var e=0;e<f;e++)k[e]=(c=k[e])&a|c>>>1&b,d[e]=e;return l.forEach(function(a){a(t,[],d)}),p.splice(q,1),p.slice(q).forEach(function(a,b){a(q+b)}),removeListeners.forEach(function(a){var b=n.indexOf(a);b>=0&&n.splice(b,1),b=l.indexOf(a),b>=0&&l.splice(b,1)}),h--,o}var o={filter:W,filterExact:X,filterRange:Z,filterAll:$,top:_,bottom:ba,group:bb,groupAll:bc,remove:bd},q=h++,t=1<<q,D=~t,H,I,J,K,L=m(function(a){return J[a]}),N=w,O=[],P=0,Q=0,R=!1,S=!1;return removeListeners=[],n.unshift(T),n.push(U),removeListeners.push(T),removeListeners.push(U),h>j&&(k=s(k,j<<=1)),T(e,0,f),U(e,0,f),p.push(function(a){t=1<<(q=a),D=~t}),o}function D(){function i(a,d,g){var i;if(h)return;for(i=d;i<f;++i)k[i]||(b=c(b,e[i]))}function j(a,f,g,i){var j,l,m;if(h=h||i)return;for(j=0,m=f.length;j<m;++j)k[l=f[j]]||(b=c(b,e[l]));for(j=0,m=g.length;j<m;++j)k[l=g[j]]===a&&(b=d(b,e[l]))}function m(){var a;b=g();for(a=0;a<f;++a)k[a]||(b=c(b,e[a]))}function o(b,e,f){return c=b,d=e,g=f,h=!0,a}function p(){return o(z,A,y)}function q(a){return o(B(a),C(a),y)}function r(){return h&&(m(),h=!1),b}var a={reduce:o,reduceCount:p,reduceSum:q,value:r},b,c,d,g,h=!0;return l.push(j),n.push(i),i(e,0,f),p()}function H(){return f}var a={add:q,dimension:t,groupAll:D,size:H},e=[],f=0,h=0,j=8,k=o(0),l=[],n=[],p=[];return arguments.length?q(arguments[0]):a}function E(a,b){return(b<257?o:b<65537?p:q)(a)}function F(a){var b=E(a,a);for(var c=-1;++c<a;)b[c]=c;return b}function G(a){return a===8?256:a===16?65536:4294967296}D.version="1.1.0",D.permute=c;var d=D.bisect=e(b);d.by=e;var f=D.heap=g(b);f.by=g;var h=D.heapselect=i(b);h.by=i;var j=D.insertionsort=k(b);j.by=k;var l=D.quicksort=m(b);l.by=m;var n=32,o=t,p=t,q=t,r=b,s=b;typeof Uint8Array!="undefined"&&(o=function(a){return new Uint8Array(a)},p=function(a){return new Uint16Array(a)},q=function(a){return new Uint32Array(a)},r=function(a,b){var c=new a.constructor(b);return c.set(a),c},s=function(a,b){var c;switch(b){case 16:c=p(a.length);break;case 32:c=q(a.length);break;default:throw new Error("invalid array width!")}return c.set(a),c}),a.crossfilter=D})(this);